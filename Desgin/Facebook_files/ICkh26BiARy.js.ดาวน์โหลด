;/*FB_PKG_DELIM*/

__d("StoriesContextualReplyBar_suggestions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesContextualReplyBar_suggestions",selections:[{args:null,kind:"FragmentSpread",name:"StoriesSuggestedStickerReply_suggestions"},{args:null,kind:"FragmentSpread",name:"StoriesSuggestedTextReply_suggestions"}],type:"ConversationGuideSuggestion",abstractKey:"__isConversationGuideSuggestion"};e.exports=a}),null);
__d("StoriesSuggestedStickerReply_suggestions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesSuggestedStickerReply_suggestions",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Sticker",abstractKey:null}],type:"ConversationGuideSuggestion",abstractKey:"__isConversationGuideSuggestion"};e.exports=a}),null);
__d("StoriesSuggestedTextReplyPill_text.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesSuggestedTextReplyPill_text",selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],type:"TextWithEntities",abstractKey:null};e.exports=a}),null);
__d("StoriesSuggestedTextReply_suggestions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesSuggestedTextReply_suggestions",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text_with_entities",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesSuggestedTextReplyPill_text"}],storageKey:null}],type:"TextSuggestion",abstractKey:null}],type:"ConversationGuideSuggestion",abstractKey:"__isConversationGuideSuggestion"};e.exports=a}),null);
__d("StoriesContextualReplyBarDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("StoriesContextualReplyBar.react").__setRef("StoriesContextualReplyBarDeferred.react"));b=a;g["default"]=b}),98);
__d("StoriesSuggestedStickerReplyPill.react",["CometImage.react","CometPressable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=45,k={container:{backgroundColor:"x1f2gare",borderTopStartRadius:"x1ke7ulo",borderTopEndRadius:"x3jqge",borderBottomEndRadius:"x1i7howy",borderBottomStartRadius:"x4y8mfe",marginBottom:"x1e56ztr",$$css:!0},sticker:{end:"x1ndm9hd",left:null,right:null,position:"x10l6tqk",top:"xj3g9s9",$$css:!0}};function a(a){var b=a.cardID,d=a.label,e=a.onPress,f=a.pillWidth,g=a.stickerID,h=a.stickerScale;a=a.url;return i.jsx(c("CometPressable.react"),{"aria-label":(d=d)!=null?d:"",onPress:function(){return e(g,b)},style:{height:j,width:f},xstyle:k.container,children:i.jsx(c("CometImage.react"),{height:h,src:(d=a)!=null?d:"",width:h,xstyle:k.sticker})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesSuggestedStickerReply.react",["CometRelay","StoriesGating","StoriesLoggerContext","StoriesLoggingConstants","StoriesSuggestedStickerReplyPill.react","StoriesSuggestedStickerReply_suggestions.graphql","StoriesSuspensePauseOnHoverContainer.react","react","useStoriesSendReply","useStoriesShowEpdBlockToast","useStoriesViewerBaseDimensions","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useMemo,o=e.useRef,p=15,q=30,r=25;function a(a){var e=a.cardID,f=a.guideSuggestionsData,g=a.ownerName,i=a.setHasSticker;a=l(c("StoriesLoggerContext"));var s=a.logger;a=c("useStoriesSendReply")(g);var t=a.sendSticker,u=c("useStoriesShowEpdBlockToast")(),v=o(!1);g=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesSuggestedStickerReply_suggestions.graphql"),f);var w=g==null?void 0:g.map(function(a){return a.id!=null&&a.label!=null&&a.url!=null?{id:a.id,label:a.label,url:a.url}:null}).filter(Boolean);m(function(){var a;((a=w==null?void 0:w.length)!=null?a:0)!==0&&i(!0)},[w,i]);var x=k(function(a,b){var e;if(!d("StoriesGating").allowedByEPDClientFeatureBlock()){u();return}if(a==null||b==null)return;if(((e=w==null?void 0:w.length)!=null?e:0)>=4){e=(e=w==null?void 0:w.map(function(b){if(a!==b.id)return b.id}).filter(Boolean))!=null?e:[];e=[a].concat(e.slice(0,2)).sort();s.smartReplyTapLog(e,c("StoriesLoggingConstants").STORY_REPLY_TYPE.STICKER)}t({isContextualReply:!0,stickerID:a,storyID:b},s);s.replySentWhenSmartReplyShownLog(!1,a,!0,c("StoriesLoggingConstants").STORY_REPLY_TYPE.STICKER)},[w,s,t,u]),y=c("useStoriesViewerBaseDimensions")().width-r;a=n(function(){var a=[],b=[];if(w==null)return{pills:a,smartReplyIDList:b};var d=Math.floor(y/(q+r+p));for(var f=0;f<Math.min(d,w.length);f++){var g=w[f].id;a.push(j.jsx("div",{className:"xg0sddc xzwhwyb",children:j.jsx(c("StoriesSuspensePauseOnHoverContainer.react"),{children:j.jsx(c("StoriesSuggestedStickerReplyPill.react"),{cardID:e,label:w[f].label,onPress:x,pillWidth:q+r,stickerID:g,stickerScale:q,url:w[f].url})})},w[f].id));b.push(g)}return{pills:a,smartReplyIDList:b}},[e,w,y,x]);f=a.pills;var z=a.smartReplyIDList;g=c("useVisibilityObserver")({onVisible:function(){v.current===!1&&(s.smartReplyImpressionLog(z,[],c("StoriesLoggingConstants").STORY_REPLY_TYPE.STICKER),v.current=!0)}});return f.length===0?null:j.jsx("div",{className:"x78zum5 x1q0g3np xl56j7k xh8yej3",ref:g,children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesSuggestedTextReplyPill.react",["CometEmojiTransform","CometEmoticonTransform","CometPressable.react","CometRelay","CometTextWithEntitiesRelay.react","StoriesSuggestedTextReplyPill_text.graphql","TetraText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={container:{backgroundColor:"x1f2gare",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",height:"xc9qbxq",justifyContent:"xl56j7k",marginBottom:"xod5an3",$$css:!0},text:{alignSelf:"xamitd3",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var e=a.id,f=a.onPress,g=a.text;a=a.textWithEntity;a=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesSuggestedTextReplyPill_text.graphql"),a);var i=[c("CometEmoticonTransform")(),c("CometEmojiTransform")()];return j.jsx(c("CometPressable.react"),{onPress:function(){return f(e,g)},xstyle:k.container,children:j.jsx("div",{className:"xamitd3 x1y1aw1k x1sxyh0 xwib8y2 xurb0ha",children:j.jsx(c("TetraText.react"),{align:"center",color:"white",numberOfLines:1,type:"bodyLink3",children:j.jsx(c("CometTextWithEntitiesRelay.react"),{textWithEntities:a,transforms:i})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesSuggestedTextReply.react",["CometRelay","DeferredDraftEditorDEPRECATED.react","EditorState","EmojiInputDecorator","EmojiSpan.react","SelectionState","StoriesFeedbackEditorStateContext","StoriesLoggerContext","StoriesLoggingConstants","StoriesSuggestedTextReplyPill.react","StoriesSuggestedTextReply_suggestions.graphql","StoriesSuspensePauseOnHoverContainer.react","getPlainTextFromDeferredDraftEditorState_DEPRECATED_DO_NOT_USE","react","useStoriesViewerBaseDimensions","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useMemo,o=e.useRef,p=10,q=30;function a(a){var e=a.guideSuggestionsData,f=a.setHasText,g=o(!1);a=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesSuggestedTextReply_suggestions.graphql"),e);e=l(c("StoriesFeedbackEditorStateContext"));var i=e.contextualReplyRef,r=e.editorState,s=e.onFocus,t=e.setContextualReplyTapped,u=e.setEditorState,v=e.setMostRecentTappedID;e=l(c("StoriesLoggerContext"));var w=e.logger,x=a==null?void 0:a.map(function(a){if(a.id!=null&&a.text!=null&&a.text_with_entities!=null){var b=a.id,c=a.text;a=a.text_with_entities;return{id:b,text:c,textWithEntity:a}}return null}).filter(Boolean);m(function(){var a;((a=x==null?void 0:x.length)!=null?a:0)!==0&&f(!0)},[x,f]);var y=k(function(a,b){w.smartReplyTapLog([],c("StoriesLoggingConstants").STORY_REPLY_TYPE.TEXT_SUGGESTION);var d=c("getPlainTextFromDeferredDraftEditorState_DEPRECATED_DO_NOT_USE")(r).trim();d=d.length===0?b:d+" "+b;b=new(c("EmojiInputDecorator"))(c("EmojiSpan.react"),null,{size:16});b=c("EditorState").createWithText(d,b);var e=b.getSelection();e=new(c("SelectionState"))({anchorKey:e.getAnchorKey(),anchorOffset:d.length,focusKey:e.getFocusKey(),focusOffset:d.length,hasFocus:!0,isBackward:!1});u({__type:c("DeferredDraftEditorDEPRECATED.react").EDITOR_STATE,draftEditorState:c("EditorState").forceSelection(b,e)});s();t(!0);v(a)},[w,r,u,s,t,v]),z=c("useStoriesViewerBaseDimensions")().width-q,A=7.5;e=n(function(){var a=z,b=[],d=[],e=[];if(x==null)return{pills:b,smartReplyIDList:d,smartReplyTextList:e};var f=0;while(f<x.length&&x[f].text.length*A+q<=a){var g=x[f].text,h=g.length*A,i=x[f].id;b.push(j.jsx("div",{className:"x1mpkggp x1t2a60a",children:j.jsx(c("StoriesSuspensePauseOnHoverContainer.react"),{children:j.jsx(c("StoriesSuggestedTextReplyPill.react"),{id:i,onPress:y,text:g,textWithEntity:x[f].textWithEntity})})},x[f].id));d.push(i);e.push(g);a=a-h-q-p;f+=1}return{pills:b,smartReplyIDList:d,smartReplyTextList:e}},[x,z,y]);a=e.pills;var B=e.smartReplyIDList,C=e.smartReplyTextList;e=c("useVisibilityObserver")({onVisible:function(){g.current===!1&&(w.smartReplyImpressionLog(B,C,c("StoriesLoggingConstants").STORY_REPLY_TYPE.TEXT_SUGGESTION),g.current=!0)}});return a.length===0?null:j.jsx("div",{ref:e,children:j.jsx("div",{className:"x78zum5 x1q0g3np xl56j7k xh8yej3",ref:i,children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesContextualReplyBar.react",["CometRelay","StoriesContextualReplyBar_suggestions.graphql","StoriesSuggestedStickerReply.react","StoriesSuggestedTextReply.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=a.cardID,f=a.guideSuggestionsData,g=a.ownerName,i=a.setHasSticker;a=a.setHasText;f=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesContextualReplyBar_suggestions.graphql"),f);return j.jsxs(j.Fragment,{children:[j.jsx(c("StoriesSuggestedTextReply.react"),{guideSuggestionsData:f,setHasText:a}),j.jsx(c("StoriesSuggestedStickerReply.react"),{cardID:e,guideSuggestionsData:f,ownerName:g,setHasSticker:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);